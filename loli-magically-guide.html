<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Тест гайда</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    body {
      background: #1a1a2e;
      color: #e0e0ff;
      font-family: sans-serif;
      margin: 0;
      padding: 30px;
    }

    .guide-block {
      max-width: 900px;
      margin: 0 auto;
      background: #16162a;
      border: 1px solid #8b5cf6;
      border-radius: 12px;
      padding: 20px;
      display: flex;
      gap: 20px;
    }

    @media (max-width: 768px) {
      .guide-block { flex-direction: column; }
    }

    .model-column {
      flex: 0 0 240px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    model-viewer {
      width: 220px;
      height: 220px;
      background: transparent;
    }

    .inventory-btn {
      padding: 8px 16px;
      background: #8b5cf6;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      width: 100%;
    }

    .text-column {
      flex: 1;
    }

    .text-column h2 {
      color: #a5b4fc;
      margin-bottom: 10px;
    }

    .text-column p, .text-column ul {
      margin-bottom: 12px;
      line-height: 1.5;
    }

    /* Модальное окно */
    #inventoryModal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.7);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal-content {
      background: #1a1a2e;
      border: 1px solid #8b5cf6;
      border-radius: 12px;
      padding: 20px;
      max-width: 900px;
      width: 90%;
      position: relative;
    }

    .close {
      position: absolute;
      top: 10px;
      right: 15px;
      color: #a5b4fc;
      font-size: 28px;
      cursor: pointer;
    }

    .inventory-image-container {
      display: flex;
      justify-content: center;
    }

    .inventory-image-container img {
      max-width: 100%;
      max-height: 80vh;
      border: 2px solid #8b5cf6;
      border-radius: 8px;
    }

    /* Подсказка */
    #tooltip {
      position: absolute;
      background: #000;
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 14px;
      pointer-events: none;
      z-index: 1001;
      display: none;
      max-width: 250px;
      word-wrap: break-word;
    }
  </style>
</head>
<body>

  <!-- Основной блок -->
  <div class="guide-block">
    <div class="model-column">
      <!-- 3D-модель -->
      <model-viewer
        src="models/helio.glb"
        environment-image="neutral"
        camera-controls
        ar
        style="width: 220px; height: 220px;">
        <div slot="progress-bar" style="display:none"></div>
        <img
          src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220' viewBox='0 0 220 220'%3E%3Crect width='220' height='220' fill='%231a1a2e'/%3E%3Ctext x='110' y='115' font-family='sans-serif' font-size='16' fill='%238b5cf6' text-anchor='middle'%3E?%3C/text%3E%3C/svg%3E"
          slot="poster"
        />
      </model-viewer>

      <!-- Кнопка -->
      <button class="inventory-btn" onclick="openInventory()">Инвентарь</button>
    </div>

    <div class="text-column">
      <h2>Синтезатор магических слитков</h2>
      <p>Это устройство позволяет создавать <strong>магические слитки</strong> из обычных руд и ингредиентов.</p>
      <ul>
        <li>Автоматизация</li>
        <li>Поддержка AE2, Ender IO</li>
        <li>Работает от Redstone Flux</li>
      </ul>
    </div>
  </div>

  <!-- Модальное окно -->
  <div id="inventoryModal">
    <div class="modal-content">
      <span class="close" onclick="closeInventory()">&times;</span>
      <div class="inventory-image-container">
        <img
          src="images/heliospheric_charging_center.png"
          usemap="#invMap"
          alt="Инвентарь"
        />
      </div>
      <map name="invMap">
        <area shape="rect" coords="50,100,100,200" 
              onmouseover="showTip(event, 'Бак для жидкости\\nОчистка: SHIFT+ПКМ')"
              onmouseout="hideTip()" />
        <area shape="rect" coords="160,100,220,180" 
              onmouseover="showTip(event, 'Слот для ядра / микрозвезды')"
              onmouseout="hideTip()" />
        <area shape="rect" coords="280,120,320,160" 
              onmouseover="showTip(event, 'Блоки звездной материи')"
              onmouseout="hideTip()" />
        <area shape="rect" coords="80,240,120,280" 
              onmouseover="showTip(event, 'Улучшение: Термоизолятор')"
              onmouseout="hideTip()" />
      </map>
    </div>
  </div>

  <!-- Подсказка -->
  <div id="tooltip"></div>

  <script>
    // Открыть инвентарь
    function openInventory() {
      document.getElementById('inventoryModal').style.display = 'flex';
    }

    // Закрыть
    function closeInventory() {
      document.getElementById('inventoryModal').style.display = 'none';
    }

    // Закрытие по клику вне окна
    document.addEventListener('click', (e) => {
      const modal = document.getElementById('inventoryModal');
      if (modal.style.display === 'flex' && !modal.contains(e.target)) {
        closeInventory();
      }
    });

    // Подсказки
    function showTip(event, text) {
      const t = document.getElementById('tooltip');
      t.textContent = text.replace(/\\n/g, '\n');
      t.style.display = 'block';
      t.style.left = (event.pageX + 10) + 'px';
      t.style.top = (event.pageY + 10) + 'px';
    }

    function hideTip() {
      document.getElementById('tooltip').style.display = 'none';
    }
  </script>
</body>
</html>
