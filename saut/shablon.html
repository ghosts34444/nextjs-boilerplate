<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Galacticraft — LoliLand</title>

  <!-- Стили -->
  <link rel="stylesheet" href="../../styles/common.css">
  <link rel="stylesheet" href="../../styles/menu/menu.css">
  <link rel="stylesheet" href="../../styles/stars/stars.css">
  <link rel="stylesheet" href="../../styles/guides.css"> <!-- НОВЫЙ -->

  <!-- Для 3D-моделей -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
</head>
<body>

  <!-- Звёзды -->
  <div id="stars-container"></div>

  <!-- Меню -->
  <nav class="navbar" id="mainNav">
    <div class="navbar-container">
      <ul class="nav-menu" id="navMenu">
        <!-- Основное -->
        <li class="menu-group-title">Основное</li>
        <li><a href="../../index.html" class="nav-link">ГЛАВНАЯ</a></li>
        <li><a href="../../pages/warp-info/warp-info.html" class="nav-link">ЦЕНЫ ВАРПА</a></li>
        <li><a href="../../pages/services/services.html" class="nav-link">УСЛУГИ</a></li>
        <li><a href="../../pages/about-saut/about-saut.html" class="nav-link">О САЙТЕ</a></li>
        <li><a href="../../pages/about-server/about-server.html" class="nav-link">О СЕРВЕРЕ</a></li>
        <li><a href="../../pages/creators/creators.html" class="nav-link creators-link">СОЗДАТЕЛИ</a></li>

        <!-- Гайды -->
        <li class="menu-group-title">Гайды</li>
        <li><a href="../../pages/guids-magic/guids-magic.html">МАГИЯ</a></li>
        <li><a href="../../pages/guids-tech/guids-tech.html">ТЕХНОЛОГИИ</a></li>
        <li><a href="../../pages/guids-ae2/guids-ae2.html">АВТОМАТИЗАЦИЯ</a></li>
        <li><a href="../../pages/guids-forestry/guids-forestry.html">ПЧЕЛОВОДСТВО</a></li>
        <li><a href="../../pages/guids-dimension/guids-dimension.html">ИЗМЕРЕНИЕ ДРАКОНОВ</a></li>
        <li><a href="../../pages/guids-galacticraft/guids-galacticraft.html" class="nav-link active">GALACTICRAFT</a></li>
      </ul>
      <div class="menu-toggle" id="mobileMenuButton">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </nav>

  <!-- Поиск -->
  <div class="guide-search-wrapper">
    <input type="text" id="guide-search" placeholder="Поиск по гайдам..." autocomplete="off">
    <button id="search-clear">×</button>
    <div id="search-suggestions" class="search-suggestions"></div>
  </div>

  <main>
    <div class="content">
      <!-- Сюда вставляй содержимое гайда -->
    </div>
  </main>

  <!-- Скрипты -->
  <script src="../../styles/stars/stars.js"></script>
  <script src="../../styles/menu/menu.js"></script>
  <script src="../../data/guides.js"></script>
  <script>
    // === ПОИСК БЕЗ ПЕРЕХОДА — ТОЛЬКО ПРОКРУТКА ===
    document.addEventListener('DOMContentLoaded', () => {
      if (typeof window.GUIDES_DATA === 'undefined') return;

      const searchInput = document.getElementById('guide-search');
      const searchClear = document.getElementById('search-clear');
      const suggestions = document.getElementById('search-suggestions');

      if (!searchInput) return;

      searchClear?.addEventListener('click', () => {
        searchInput.value = '';
        searchClear.style.display = 'none';
        suggestions.style.display = 'none';
      });

      searchInput.addEventListener('input', () => {
        const query = searchInput.value.trim().toLowerCase();
        searchClear.style.display = query ? 'block' : 'none';
        suggestions.style.display = 'none';

        if (query.length < 2) return;

        let results = [];
        for (const [modKey, mod] of Object.entries(window.GUIDES_DATA)) {
          // Только текущая страница (galacticraft)
          if (!mod.page.includes('guids-galacticraft')) continue;

          const modMatch = mod.aliases.some(a => a.includes(query)) ||
                          mod.title.toLowerCase().includes(query);
          if (modMatch) {
            results.push({ title: mod.title, id: modKey });
          }

          for (const [secKey, section] of Object.entries(mod.sections || {})) {
            if (section.title.toLowerCase().includes(query) ||
                section.content.toLowerCase().includes(query)) {
              results.push({ 
                title: `${mod.title}: ${section.title}`, 
                id: secKey 
              });
            }
          }
        }

        if (results.length > 0) {
          suggestions.innerHTML = '';
          results.slice(0, 5).forEach(item => {
            const div = document.createElement('div');
            div.className = 'search-suggestion';
            div.textContent = item.title;
            div.addEventListener('click', () => {
              const target = document.getElementById(item.id);
              if (target) {
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                searchInput.value = '';
                searchClear.style.display = 'none';
                suggestions.style.display = 'none';
              }
            });
            suggestions.appendChild(div);
          });
          suggestions.style.display = 'block';
        }
      });

      document.addEventListener('click', (e) => {
        if (!searchInput.contains(e.target) && !suggestions.contains(e.target)) {
          suggestions.style.display = 'none';
        }
      });
    });
  </script>

</body>
</html>
